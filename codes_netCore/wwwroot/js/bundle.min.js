function CreateNew(n,t){$(t).valid()&&$.ajax({url:n,type:"POST",data:$(t).serialize(),success:function(){$(t)[0].reset()},error:function(){}})}function DeleteCodes(n,t){var i=cntrlIsPressed;$("#loader").show();$.ajax({url:"/Codes/Delete",type:"POST",data:{ids:n},success:function(){i?DeleteAllTableCodes_OnSuccess(t):DeleteArray_OnSuccess(t);document.getElementById("Logs").value="200 OK";$("#loader").hide()},error:function(n){document.getElementById("Logs").value=n.statusText;$("#loader").hide()}})}function DeleteArray_OnSuccess(n){$(n).css("background-color","#FFFFFF")}function DeleteAllTableCodes_OnSuccess(n){$(n).css("background-color","#FFFFFF")}function DeleteInheritedCode(n,t){$("#loader").show();$.ajax({url:"/Codes/DeleteInheritedCode",type:"POST",data:{Id:n,CountryId:$("#ddlCountries").val(),R:$("#regionChange").val(),Value:t},success:function(){document.getElementById("Logs").value="200 OK";RegionChanged($("#regionChange").val());$("#loader").hide()},error:function(n){document.getElementById("Logs").value=n.statusText;$("#loader").hide()}})}function SendCodesOnServer(n,t){var i=cntrlIsPressed;$("#loader").show();$.ajax({url:"/Codes/CreateMulti",type:"POST",data:{CountryId:$("#ddlCountries").val(),NetworkId:document.getElementById("NetworkIdSaver").value,R:$("#regionChange").val(),Values:n},success:function(){i?AddedAllTableCodes_OnSuccess(t):AddedArray_OnSuccess(t);RegionChanged($("#regionChange").val());document.getElementById("Logs").value="200 OK";$("#loader").hide()},error:function(n){document.getElementById("Logs").value=n.statusText;$("#loader").hide()}})}function AddedAllTableCodes_OnSuccess(n){for(var i,t=0;t<n.length;++t)for(i=2;i<12;++i)$(n[t].cells[i]).css("background-color",document.getElementById("HexSaver").value)}function AddedArray_OnSuccess(n){for(var t=0;t<=n.length;++t)$(n).css("background-color",document.getElementById("HexSaver").value)}function IsNetworkSelected(){return document.getElementById("NetworkIdSaver").value==="0"?(document.getElementById("Logs").value="Client: network not selected",!1):!0}function RegionChanged(n){$.ajax({url:"/Countries/CodesTable",type:"GET",data:{countryId:$("#ddlCountries").val(),R:n},success:function(n){UpdateTable(n);UpdateList()},error:function(n){document.getElementById("Logs").value=n.statusText}})}function UpdateTable(n){var t=$(n).find("#tb1 tbody").children(),i=$(n).find("#tb2 tbody").children(),r=$("#tb1"),u=$("#tb2");r.find("tbody").empty().append(t);u.find("tbody").empty().append(i)}function UpdateList(){$.ajax({url:"/Countries/CodesList",type:"GET",data:{countryId:$("#ddlCountries").val()},success:function(n){$("#CodesList").html(n)}})}function ddlCountries_changed(n){$.ajax({url:"/Networks/NetworkDropDown",type:"GET",data:{countryId:n},success:function(n){$("#NetworkDD").html(n)}})}function NetworkSelected(n){document.getElementById("HexSaver").value=$(n).css("background-color");document.getElementById("NetworkIdSaver").value=n.id}function RetreiveNetworks(){$.ajax({url:"/Networks/Index",type:"GET",data:{id:$("#ddlCountries").val()},success:function(n){$("#NetworkContent").html(n)},error:function(n){document.getElementById("Logs").value=n.statusText}})}var cntrlIsPressed=!1;$(document).keydown(function(n){n.key==="Control"&&(cntrlIsPressed=!0)});$(document).keyup(function(){cntrlIsPressed=!1});$("body").on("mousedown","tbody td",function(){window.event.preventDefault();cntrlIsPressed||event.button!==1||(document.getElementById("regionChange").value=$("#regionChange").val()+this.textContent.charAt(0),RegionChanged($("#regionChange").val()))});$("body").on("mousedown","tbody td",function(){window.event.preventDefault();var n=$("#regionChange").val();cntrlIsPressed&&n.length>1&&event.button===1&&(cntrlIsPressed=!1,n=n.slice(0,n.length-1),document.getElementById("regionChange").value=n,RegionChanged(n))});$("body").on("contextmenu","thead th",function(){var n;if(window.event.preventDefault(),cntrlIsPressed===!0){cntrlIsPressed=!1;return}var i=[],u=[],t=this.closest("table"),r=parseInt(this.textContent,10)+2;for(n=1;n<t.rows.length;++n)t.rows[n].cells[r].id!=="0"&&(i.push(t.rows[n].cells[r].id),u.push(t.rows[n].cells[r]));if(i.length===0){document.getElementById("Logs").value="Client: nothing to delete";return}DeleteCodes(i,u)});$("body").on("contextmenu","tbody td",function(){var r=[],i=[],u=[],n,t;if(cntrlIsPressed){for(i=$(this.closest("tbody")).children(),n=0;n<i.length;++n)for(t=2;t<12;++t)i[n].cells[t].id!=="0"&&(r.push(i[n].cells[t].id),u.push(i[n].cells[t]));if(r.length===0){document.getElementById("Logs").value="Client: nothing to delete";cntrlIsPressed=!1;window.event.preventDefault();return}}else{if(this.id<0){DeleteInheritedCode(this.id,this.textContent);window.event.preventDefault();return}if(this.id==="0"){document.getElementById("Logs").value="Client: nothing to delete";window.event.preventDefault();return}r.push(this.id);u.push(this)}DeleteCodes(r,u);window.event.preventDefault()});$("body").on("contextmenu","tbody th",function(){var n;if(window.event.preventDefault(),cntrlIsPressed===!0){cntrlIsPressed=!1;return}var t=$(this).parent().children("td"),i=[],r=[];for(n=0;n<t.length;++n)t[n].id!=="0"&&(i.push(t[n].id),r.push(t[n]));if(i.length===0){document.getElementById("Logs").value="Client: nothing to delete";return}DeleteCodes(i,r)});$("body").on("click","thead th",function(){var n;if(IsNetworkSelected()&&cntrlIsPressed!==!0){var i=[],r=[],t=this.closest("table"),u=parseInt(this.textContent,10)+2;for(n=1;n<t.rows.length;++n)i.push(t.rows[n].cells[u].textContent),r.push(t.rows[n].cells[u]);SendCodesOnServer(i,r)}});$("body").on("click","tbody td",function(){var t,n,i,r;if(IsNetworkSelected()){if(t=[],n=[],cntrlIsPressed===!0)for(n=$(this.closest("tbody")).children(),i=0;i<n.length;++i)for(r=2;r<12;++r)t.push(n[i].cells[r].textContent);else n.push(this),t.push(this.textContent);SendCodesOnServer(t,n)}});$("body").on("click","tbody th",function(){var i,n,t;if(IsNetworkSelected()&&cntrlIsPressed!==!0){for(i=[],n=$(this).parent().children("td"),t=0;t<n.length;++t)i.push(n[t].textContent);SendCodesOnServer(i,n)}});$("#ddlCountries").change(function(){$.ajax({url:"/Countries/CodesTable",type:"GET",data:{countryId:$("#ddlCountries").val()},success:function(n){$("#CodesContent").html(n);RetreiveNetworks();UpdateList()},error:function(n){document.getElementById("Logs").value=n.statusText}})});$("#Code").bind("keydown",function(){document.getElementById("FLAG").value="0"});